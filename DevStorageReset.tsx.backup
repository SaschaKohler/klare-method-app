// Tempor√§re Komponente f√ºr Development - Storage komplett leeren
import React from 'react';
import { View, Text, Button, Alert } from 'react-native';
import { unifiedStorage } from '../storage/unifiedStorage';
import { MMKV } from 'react-native-mmkv';

export const DevStorageReset: React.FC = () => {
  const resetAllStorage = () => {
    Alert.alert(
      'Storage Reset',
      'Alle lokalen Daten werden gel√∂scht. Bist du sicher?',
      [
        { text: 'Abbrechen', style: 'cancel' },
        {
          text: 'Alles l√∂schen',
          style: 'destructive',
          onPress: () => {
            try {
              // Alle MMKV Storage Keys l√∂schen
              const storageKeys = [
                'klare-user-storage',
                'klare-lifeWheel-storage', 
                'klare-progression-storage',
                'klare-theme-storage',
                'klare-resources-storage',
                'klare-journal-storage',
                'klare-visionBoard-storage',
                'onboarding-storage', // Onboarding Store
                'klare-app-storage',   // Main Storage
                'klare-general',       // Privacy Storage
                'klare-sensitive',
                'klare-privacy'
              ];

              // Jeden MMKV Storage l√∂schen
              storageKeys.forEach(key => {
                try {
                  const storage = new MMKV({ id: key });
                  storage.clearAll();
                  console.log(`‚úÖ Cleared storage: ${key}`);
                } catch (error) {
                  console.log(`‚ö†Ô∏è Could not clear ${key}:`, error);
                }
              });

              Alert.alert('Erfolg', 'Alle lokalen Daten wurden gel√∂scht. App neu starten!');
            } catch (error) {
              console.error('Reset Error:', error);
              Alert.alert('Fehler', 'Fehler beim Storage-Reset');
            }
          }
        }
      ]
    );
  };

  return (
    <View style={{ padding: 20, backgroundColor: '#ff6b6b', margin: 10, borderRadius: 8 }}>
      <Text style={{ color: 'white', fontWeight: 'bold', marginBottom: 10 }}>
        üö® Development Only - Storage Reset
      </Text>
      <Button title="Alle lokalen Daten l√∂schen" onPress={resetAllStorage} color="#fff" />
    </View>
  );
};
